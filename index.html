<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Super Akimmcuy World</title>
    <style>
        body { margin: 0; overflow: hidden; background: #5c94fc; font-family: 'Courier New', Courier, monospace; }
        #game-ui { position: absolute; top: 20px; left: 20px; color: white; text-shadow: 3px 3px #000; z-index: 10; }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="game-ui">
        <h1 style="margin:0">MARIO AKIMMCUYY</h1>
        <h2 style="margin:0">SKOR: <span id="score">0</span></h2>
    </div>
    <canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let scrollOffset = 0;
let currentScore = 0;

// OBJEK PLAYER (MARIO)
const player = {
    x: 100, y: 100, w: 40, h: 55,
    color: "#ff0000", dy: 0,
    jumpForce: 15, gravity: 0.8,
    speed: 7, grounded: false
};

const keys = {};

// DESAIN LEVEL (Pipa dan Awan)
const pipes = [
    {x: 600, w: 80, h: 120},
    {x: 1100, w: 80, h: 180},
    {x: 1600, w: 80, h: 100},
    {x: 2100, w: 80, h: 220}
];

function drawMario(x, y) {
    // Badan/Baju
    ctx.fillStyle = "red";
    ctx.fillRect(x, y, 40, 30);
    // Celana Biru
    ctx.fillStyle = "blue";
    ctx.fillRect(x, y + 30, 40, 20);
    // Sepatu
    ctx.fillStyle = "#542d00";
    ctx.fillRect(x, y + 50, 15, 10);
    ctx.fillRect(x + 25, y + 50, 15, 10);
    // Topi
    ctx.fillStyle = "#b30000";
    ctx.fillRect(x - 5, y, 45, 10);
    // Muka
    ctx.fillStyle = "#ffcc99";
    ctx.fillRect(x + 10, y + 5, 25, 20);
}

function drawBackground() {
    // Gambar Tanah Berumput
    ctx.fillStyle = "#70483c"; // Cokelat
    ctx.fillRect(0, canvas.height - 40, canvas.width, 40);
    ctx.fillStyle = "#3cb043"; // Rumput Hijau
    ctx.fillRect(0, canvas.height - 60, canvas.width, 20);

    // Gambar Pipa-Pipa
    pipes.forEach(pipe => {
        let pipeX = pipe.x - scrollOffset;
        // Batang Pipa
        ctx.fillStyle = "#32cd32";
        ctx.fillRect(pipeX, canvas.height - 60 - pipe.h, pipe.w, pipe.h);
        ctx.strokeStyle = "black";
        ctx.lineWidth = 3;
        ctx.strokeRect(pipeX, canvas.height - 60 - pipe.h, pipe.w, pipe.h);
        // Kepala Pipa
        ctx.fillStyle = "#228b22";
        ctx.fillRect(pipeX - 5, canvas.height - 65 - pipe.h, pipe.w + 10, 30);
        ctx.strokeRect(pipeX - 5, canvas.height - 65 - pipe.h, pipe.w + 10, 30);
    });
}

function update() {
    // Gerakan
    if (keys["ArrowRight"]) {
        player.x += player.speed;
        if (player.x > canvas.width / 2) {
            scrollOffset += player.speed;
            currentScore++;
        }
    }
    if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;

    // Lompat
    if ((keys[" "] || keys["ArrowUp"]) && player.grounded) {
        player.dy = -player.jumpForce;
        player.grounded = false;
    }

    player.dy += player.gravity;
    player.y += player.dy;

    // Cek Pijakan Tanah
    if (player.y + player.h >= canvas.height - 60) {
        player.y = canvas.height - 60 - player.h;
        player.dy = 0;
        player.grounded = true;
    }

    // Update Skor di UI
    scoreEl.innerText = Math.floor(currentScore / 5);

    render();
    requestAnimationFrame(update);
}

function render() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground();
    drawMario(player.x - (player.x > canvas.width/2 ? scrollOffset : 0), player.y);
}

window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

update();
</script>
</body>
</html>
